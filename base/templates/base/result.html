{% extends 'main.html' %}

{% block content %}     
<div class="col-lg-8 col-md-10 col-12">       
    <div class="border border-dark">
    <h3 class="bg-dark text-white p-2 text-capitalize">Poll result</h3>
        <div class="p-2">
            {% if messages %}
                {% for message in messages %}        
                    {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}                        
                        <div class="alert alert-success">
                          {{ message }}
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}     
                
            {% if poll.poll_img %}
                <img src="{{ poll.poll_img.url }}" alt="" class="img-fluid rounded" style="width: 20rem;">                                   
            {% endif %} 
            <div class="row my-3">
                <div class="col-8">
                    <h3>{{ poll.question }}</h3>            
                </div>
                <div class="col-4 align-self-center">
                    <p class="">Created: {{ poll.date_created }} </p>
                </div>
            </div>
            <div class="row align-self-center"> 
                <div class="col-8"> 
                    <h4>Choices selected:</h4>                    
                    <ul>
                        <li class="border border-dark p-1">{{ poll.question_one }} --- <span class="fw-bold">{{ poll.question_one_count }}</span></li>
                        <li class="border border-dark p-1">{{ poll.question_two }} --- <span class="fw-bold">{{ poll.question_two_count }}</span></li>
                        <li class="border border-dark p-1">{{ poll.question_three }} --- <span class="fw-bold">{{ poll.question_three_count }}</span></li>
                    </ul>
                </div>
                <div class="col-4">
                    <h4>Voted:</h4>                    
                    <ul>                        
                        {% for data in poll.voted.all %}                            
                            {% if data == request.user %}
                                <li class="border border-dark p-1"><a href="{% url 'profile' %}" class="text-decoration-none">{{ data }}</a></li>
                            {% else %}
                                <li class="border border-dark p-1"><a href="{% url 'creator-profile' data.profile.profile_slug data.profile.profile_uuid %}" class="text-decoration-none">{{ data }}</a></li>
                            {% endif %}                                
                        {% endfor %}                                                                                                                                                                            
                    </ul>
                </div>
            </div>
            <h5 class="fw-normal mt-3">Total: <span class="fw-bold">{{ poll.total }}</span></h5>
            <a href="{% url 'home' %}" class="btn btn-dark">Home</a>
            </div>
        </div>
    </div>
</div>
{% endblock content %}    
